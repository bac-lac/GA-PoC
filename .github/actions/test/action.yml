name: Create tfvars file
decription: Create a tfvars file that's going to be used by terraform plan/apply.
inputs:
  who-to-greet:  # id of input
    description: 'Who to greet'
    required: true
    default: 'World'
runs:
  using: "composite"
  steps:
    - name: Setup Terraform variables
      id: vars
      run: |-
        cat > pipeline.auto.tfvars2 <<EOF
        ACCOUNT = "${{ inputs.who-to-greet }}"
        ADMIN_DB_PASSWORD = "${{ inputs.who-to-greet }}"
        ADMIN_DB_USERNAME = "${{ inputs.who-to-greet }}"
        BRANCH_NAME = "${{ github.head_ref || github.ref_name }}"
        DB_PASSWORD = "${{ inputs.who-to-greet }}"
        DB_USERNAME = "${{ inputs.who-to-greet }}"
        ECR_IMAGE = "${{ inputs.who-to-greet }}"
        ENV = "${{ inputs.who-to-greet }}"
        FORCE_REFRESH = "${{ inputs.who-to-greet }}"
        MFT_CLUSTER = "${{ inputs.who-to-greet }}"
        EOF
      shell: bash
    - name: Print Terraform variables
      id: print
      run: cat pipeline.auto.tfvars2
      shell: bash